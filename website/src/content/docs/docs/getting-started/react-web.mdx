---
title: React Web
description: How to use LiveStore with React on the web.
sidebar:
  order: 1
---

import { Steps, Tabs, TabItem, Code } from '@astrojs/starlight/components';
import viteConfigCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/vite.config.js?raw'
import tablesCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/lib/tables.ts?raw'
import eventsCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/lib/events.ts?raw'
import materializersCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/lib/materializers.ts?raw'
import schemaCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/lib/schema.ts?raw'
import workerCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/worker.ts?raw'
import rootCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/routes/__root.tsx?raw'
import queriesCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/lib/queries.ts?raw'
import useQueryCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/components/meals-list.tsx?raw'
import commitCode from '../../../../../../examples/standalone/web-meals-tracking-tanstack-router/src/components/insert-food-form.tsx?raw'

### Option A: Quick start

For a quick start, we recommend using our template app following the steps below.

For existing projects, see [Existing project setup](#existing-project-setup).

<Steps>

1. **Set up project from template**

   ```shell
   bunx tiged --mode=git git@github.com:livestorejs/livestore/examples/standalone/web-linearlite my-app
   ```

   Replace `my-app` with your desired app name.

2. **Install dependencies**

   It's strongly recommended to use `bun` or `pnpm` for the simplest and most reliable dependency setup (see [note on package management](/docs/misc/package-management) for more details).

   <Tabs syncKey="package-manager">
     <TabItem label="bun">
       ```bash
       bun install
       ```
     </TabItem>
     <TabItem label="pnpm">
       ```bash
       pnpm install
       ```
     </TabItem>
     <TabItem label="npm">
        ```bash
        npm install
        ```
     </TabItem>
   </Tabs>

   Pro tip: You can use [direnv](https://direnv.net/) to manage environment variables.

3. **Run dev environment**

   <Tabs syncKey="package-manager">
     <TabItem label="bun">
       ```shell
       bun dev
       ```
     </TabItem>
     <TabItem label="pnpm">
       ```shell
       pnpm dev
       ```
     </TabItem>
     <TabItem label="npm">
       ```shell
       npm run dev
       ```
     </TabItem>
   </Tabs>

4. **Open browser**

   Open `http://localhost:60000` in your browser.

   You can also open the devtools by going to `http://localhost:60000/_livestore`.

</Steps>

### Option B: Existing project setup \{#existing-project-setup\}

<Steps>

1. **Install dependencies**

   <Tabs syncKey="package-manager">
     <TabItem label="bun">
       ```shell
       bun add @livestore/livestore @livestore/wa-sqlite @livestore/adapter-web @livestore/react @livestore/peer-deps
       ```
     </TabItem>
     <TabItem label="pnpm">
       ```shell
       pnpm add @livestore/livestore @livestore/wa-sqlite @livestore/adapter-web @livestore/react @livestore/peer-deps
       ```
     </TabItem>
     <TabItem label="npm">
       ```shell
       npm install @livestore/livestore @livestore/wa-sqlite @livestore/adapter-web @livestore/react @livestore/peer-deps
       ```
     </TabItem>
   </Tabs>

2. **Update Vite config**

   Add the following code to your `vite.config.ts` file:

   <Code code={viteConfigCode} lang="ts" title="vite.config.ts" />
</Steps>

## Database tables
Define the structure of the data as SQLite tables using `State.SQLite.table`:

<Code code={tablesCode} lang="ts" title="src/lib/tables.ts" />

## Events
Every operation must be defined as an event using `Events.synced`:

<Code code={eventsCode} lang="ts" title="src/lib/events.ts" />

## Materializers
An event just defines the name and parameters for an action. A materializer is then needed to provide the implementation of each event.

Create a materializer using `State.SQLite.materializers` passing all the events defined before:

<Code code={materializersCode} lang="ts" title="src/lib/materializers.ts" />

## Schema
`tables` and `materializers` are used to compose the state for the app using `State.SQLite.makeState`.

From this state you then derive the schema for the app using `makeSchema`:

<Code code={schemaCode} lang="ts" title="src/lib/schema.ts" />

We then export `schema`, `tables` and `events`.

## Web Worker
A web worker is used by LiveStore to sync the database in a background thread.

Create a TypeScript file that executes `makeWorker` passing `schema` exported above:

> LiveStore provides various worker adapters, in this example we are using the worker from `@livestore/adapter-web`.

<Code code={workerCode} lang="ts" title="src/worker.ts" />

## LiveStoreProvider
The final setup step is wrapping your React app with `<LiveStoreProvider>` from `@livestore/react`.

`<LiveStoreProvider>` **requires** the following parameters:
- `schema`: the schema we created before using `makeSchema`
- `adapter`: used for storage persistence, created using `makePersistedAdapter` from `@livestore/adapter-web`
- `batchUpdates`: experimental API imported from `react-dom`

> Make sure to reference the correct path for `worker.ts` and add the `?worker` extension to the import path to ensure that Vite treats it as a worker file.

<Code code={rootCode} lang="ts" title="src/routes/__root.tsx" />

## Queries
Using `queryDb` you can define SQL queries to read data from the database.

> You can either use the API provided by LiveStore (`tables.foods.select()`) or write raw SQL queries using `sql`.

You can then compose queries and compute values using `computed`.

> Consider abstracting queries into a separate file to keep your code organized.

<Code code={queriesCode} lang="tsx" title="src/lib/queries.ts" />

### Store and useQuery
After wrapping your app with the `LiveStoreProvider`, you can use the `useStore` hook from any component. It provides a type safe `store` instance that you can use to commit events and read queries.

In your component you can execute a query with `store.useQuery`:

> Note that queries are **reactive**: the component will re-render every time the data changes.

<Code code={useQueryCode} lang="tsx" title="src/components/meals-list.tsx" />

## Commit events
Using `store` from `useStore` you can also commit events. You just need to call `store.commit` passing the event to execute (type safe as well).

> Note that `store.commit` is a **synchronous operation**, therefore you don't need any complex `async` logic like `Suspense` or `useActionState`.

<Code code={commitCode} lang="tsx" title="src/components/insert-food-form.tsx" />
